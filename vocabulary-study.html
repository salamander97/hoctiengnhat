<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö H·ªçc t·ª´ v·ª±ng N5 - Flashcard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/vocabulary-study.css">
</head>

<body>
    <!-- Debug Info -->
    <div id="debugInfo" class="debug-info" style="display: none;">
        <div><strong>üêõ DEBUG MODE</strong></div>
        <div>Category ID: <span id="debugCategoryId">-</span></div>
        <div>Current Word Index: <span id="debugIndex">0</span></div>
        <div>Total Words: <span id="debugTotal">0</span></div>
        <div>Card Flipped: <span id="debugFlipped">false</span></div>
        <div>API Status: <span id="debugAPI">Waiting...</span></div>
        <div>Data Source: <span id="debugDataSource">Unknown</span></div>
        <button onclick="toggleDebug()" class="btn btn-sm btn-outline-light mt-2">Hide Debug</button>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h4>ƒêang t·∫£i t·ª´ v·ª±ng...</h4>
            <p>Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>
            <div class="mt-3">
                <small class="text-muted">ƒêang k·∫øt n·ªëi ƒë·∫øn database...</small>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">‚ùå C√≥ l·ªói x·∫£y ra</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="errorMessage">Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ v·ª±ng.</p>
                    <div class="mt-3">
                        <strong>C√°c b∆∞·ªõc kh·∫Øc ph·ª•c:</strong>
                        <ol class="mt-2">
                            <li>Ki·ªÉm tra k·∫øt n·ªëi internet</li>
                            <li>ƒê·∫£m b·∫£o ƒë√£ ƒëƒÉng nh·∫≠p</li>
                            <li>Th·ª≠ l√†m m·ªõi trang</li>
                        </ol>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="window.location.reload()">L√†m m·ªõi
                        trang</button>
                    <button type="button" class="btn btn-warning" onclick="useSampleData()">D√πng d·ªØ li·ªáu m·∫´u</button>
                </div>
            </div>
        </div>
    </div>

    <div class="study-container">
        <!-- Back Button & Controls -->
        <div class="top-controls">
            <a href="vocabulary-categories.html" class="back-button">‚Üê V·ªÅ danh s√°ch ch·ªß ƒë·ªÅ</a>
            <div class="top-actions">
                <button onclick="toggleDebug()" class="control-btn secondary btn-sm">üêõ Debug</button>
                <button onclick="window.location.reload()" class="control-btn secondary btn-sm">üîÑ Reload</button>
            </div>
        </div>

        <!-- Study Header -->
        <div class="study-header">
            <div class="session-info">
                <div class="category-badge" id="categoryName">
                    <span class="category-icon" id="categoryIcon">üìö</span>
                    <span id="categoryText">ƒêang t·∫£i...</span>
                </div>
                <div class="session-type-info">
                    Phi√™n h·ªçc: <span id="sessionType">T·ª´ m·ªõi</span> |
                    <span id="dataSource">ƒêang x√°c ƒë·ªãnh ngu·ªìn d·ªØ li·ªáu...</span>
                </div>
            </div>

            <div class="progress-info">
                <div class="study-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="currentCard">0</div>
                        <div class="stat-label">Th·∫ª hi·ªán t·∫°i</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalCards">0</div>
                        <div class="stat-label">T·ªïng th·∫ª</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="studiedToday">0</div>
                        <div class="stat-label">ƒê√£ h·ªçc h√¥m nay</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reviewsDue">0</div>
                        <div class="stat-label">C·∫ßn √¥n t·∫≠p</div>
                    </div>
                </div>

                <div class="study-progress">
                    <div class="progress">
                        <div class="progress-bar" id="studyProgress" style="width: 0%"></div>
                    </div>
                    <small class="text-muted mt-1 d-block">
                        Ti·∫øn ƒë·ªô phi√™n h·ªçc: <span id="progressText">0/0</span>
                    </small>
                </div>
            </div>
        </div>

        <!-- Flashcard Container -->
        <div class="flashcard-container">
            <div id="flashcard" class="flashcard" tabindex="0">
                <div class="flashcard-inner">
                    <!-- Front Side (Japanese) -->
                    <div class="flashcard-face flashcard-front">
                        <div class="word-japanese" id="wordJapanese">ƒêang t·∫£i...</div>
                        <div class="word-reading" id="wordReading">ƒêang t·∫£i...</div>
                        <div class="word-info">
                            <div class="frequency-rank" id="frequencyRank"></div>
                        </div>
                        <div class="flip-hint">
                            üëÜ Nh·∫•n ƒë·ªÉ xem nghƒ©a<br>
                            <small>Ho·∫∑c nh·∫•n Space/Enter</small>
                        </div>
                    </div>

                    <!-- Back Side (Vietnamese) -->
                    <div class="flashcard-face flashcard-back">
                        <div class="word-meaning" id="wordMeaning">ƒêang t·∫£i...</div>
                        <div class="word-details">
                            <div class="word-type" id="wordType">noun</div>
                            <div class="word-example">
                                <div class="word-example-jp" id="wordExampleJp">‰æãÊñá„ÅåË™≠„ÅøËæº„Åø‰∏≠...</div>
                                <div class="word-example-vn" id="wordExampleVn">V√≠ d·ª• ƒëang t·∫£i...</div>
                            </div>
                            <div class="usage-note" id="usageNote">Ghi ch√∫ ƒëang t·∫£i...</div>
                        </div>
                        <div class="knowledge-level-display">
                            <small>M·ª©c ƒë·ªô hi·ªÉu bi·∫øt hi·ªán t·∫°i: <span id="currentKnowledgeLevel">Ch∆∞a h·ªçc</span></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Study Controls -->
        <div id="studyControls" class="study-controls">
            <div class="knowledge-explanation">
                <strong>ƒê√°nh gi√° ƒë·ªô kh√≥ c·ªßa t·ª´ n√†y:</strong>
                <small class="d-block text-muted">ƒê√°nh gi√° n√†y s·∫Ω ·∫£nh h∆∞·ªüng ƒë·∫øn th·ªùi gian √¥n t·∫≠p</small>
            </div>

            <div class="knowledge-buttons">
                <button class="knowledge-btn btn-again" onclick="rateWord(1)" title="T·ª´ n√†y r·∫•t kh√≥, c·∫ßn h·ªçc l·∫°i ngay">
                    <span style="position: relative; z-index: 2;">
                        üò∞ L·∫°i<br>
                        <small>&lt;1 ph√∫t</small>
                    </span>
                </button>
                <button class="knowledge-btn btn-hard" onclick="rateWord(2)" title="T·ª´ n√†y kh√≥, c·∫ßn √¥n t·∫≠p s·ªõm">
                    <span style="position: relative; z-index: 2;">
                        ü§î Kh√≥<br>
                        <small>&lt;6 ph√∫t</small>
                    </span>
                </button>
                <button class="knowledge-btn btn-good" onclick="rateWord(3)" title="T·ª´ n√†y ·ªïn, √¥n t·∫≠p b√¨nh th∆∞·ªùng">
                    <span style="position: relative; z-index: 2;">
                        üòä T·ªët<br>
                        <small>&lt;10 ph√∫t</small>
                    </span>
                </button>
                <button class="knowledge-btn btn-easy" onclick="rateWord(4)" title="T·ª´ n√†y d·ªÖ, c√≥ th·ªÉ √¥n t·∫≠p mu·ªôn h∆°n">
                    <span style="position: relative; z-index: 2;">
                        üòÑ D·ªÖ<br>
                        <small>4 ng√†y</small>
                    </span>
                </button>
            </div>

            <div class="control-row">
                <button class="control-btn secondary" onclick="skipWord()" title="B·ªè qua t·ª´ n√†y (S)">
                    ‚è≠Ô∏è B·ªè qua
                </button>
                <button class="control-btn" onclick="flipCard()" title="L·∫≠t th·∫ª (Space/F)">
                    üîÑ L·∫≠t th·∫ª
                </button>
                <button class="control-btn secondary" onclick="playAudio()" title="Ph√°t √¢m (P)">
                    üîä Ph√°t √¢m
                </button>
                <button class="control-btn secondary" onclick="showHint()" title="G·ª£i √Ω (H)">
                    üí° G·ª£i √Ω
                </button>
                <button class="control-btn secondary" onclick="endSession()" title="K·∫øt th√∫c phi√™n h·ªçc (Esc)">
                    ‚èπÔ∏è K·∫øt th√∫c
                </button>
            </div>

            <!-- Keyboard Shortcuts Help -->
            <div class="keyboard-shortcuts mt-3">
                <small class="text-muted">
                    <strong>Ph√≠m t·∫Øt:</strong>
                    Space/Enter: L·∫≠t th·∫ª | 1-4: ƒê√°nh gi√° | S: B·ªè qua | P: Ph√°t √¢m | H: G·ª£i √Ω | Esc: K·∫øt th√∫c
                </small>
            </div>
        </div>

        <!-- Session Complete -->
        <div id="sessionComplete" class="session-complete" style="display: none;">
            <div class="complete-icon">üéâ</div>
            <h3>Ho√†n th√†nh phi√™n h·ªçc!</h3>
            <p>Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh phi√™n h·ªçc t·ª´ v·ª±ng h√¥m nay.</p>

            <div class="complete-stats">
                <div class="complete-stat">
                    <div class="complete-stat-value" id="completedWords">0</div>
                    <div>T·ª´ ƒë√£ h·ªçc</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-stat-value" id="sessionAccuracy">0%</div>
                    <div>ƒê·ªô ch√≠nh x√°c</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-stat-value" id="sessionTime">0:00</div>
                    <div>Th·ªùi gian</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-stat-value" id="experienceGained">+0</div>
                    <div>Kinh nghi·ªám</div>
                </div>
            </div>



            <div class="session-summary">
                <h5>üìä T√≥m t·∫Øt phi√™n h·ªçc</h5>
                <div id="ratingSummary" class="rating-summary"></div>
            </div>

            <div class="complete-actions">
                <button class="control-btn" onclick="startNewSession()">
                    üìö H·ªçc ti·∫øp
                </button>
                <button class="control-btn secondary" onclick="goToQuiz()">
                    ‚úèÔ∏è L√†m quiz
                </button>
                <button class="control-btn secondary" onclick="goToStats()">
                    üìä Xem th·ªëng k√™
                </button>
                <a href="vocabulary-categories.html" class="control-btn secondary">
                    üìã V·ªÅ danh s√°ch ch·ªß ƒë·ªÅ
                </a>
                <a href="index.html" class="control-btn secondary">
                    üè† V·ªÅ trang ch·ªß
                </a>
            </div>
        </div>
        <!-- Th√™m sau div sessionComplete -->
        <div id="noNewWords" class="session-complete" style="display: none;">
            <div class="complete-icon">üéì</div>
            <h3>ƒê√£ h·ªçc h·∫øt t·ª´ m·ªõi!</h3>
            <p>B·∫°n ƒë√£ h·ªçc h·∫øt t·∫•t c·∫£ t·ª´ v·ª±ng trong ch·ªß ƒë·ªÅ n√†y. H√£y √¥n t·∫≠p ho·∫∑c th·ª≠ th√°ch b·∫£n th√¢n!</p>

            <div class="complete-actions">
                <button class="control-btn" onclick="reviewMode()">
                    üîÑ √în t·∫≠p t·∫•t c·∫£ t·ª´
                </button>
                <button class="control-btn secondary" onclick="resetProgress()">
                    ‚ö° Reset ti·∫øn ƒë·ªô h·ªçc
                </button>
                <button class="control-btn secondary" onclick="goToQuiz()">
                    ‚úèÔ∏è L√†m quiz
                </button>
                <a href="vocabulary-categories.html" class="control-btn secondary">
                    üìã Ch·ªçn ch·ªß ƒë·ªÅ kh√°c
                </a>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/vocabulary-study.js"></script>
</body>

</html>
