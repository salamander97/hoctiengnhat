<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š Há»c tá»« vá»±ng N5 - Flashcard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/vocabulary-study.css">
</head>

<body>
    <!-- Debug Info -->
    <div id="debugInfo" class="debug-info" style="display: none;">
        <div><strong>ğŸ› DEBUG MODE</strong></div>
        <div>Category ID: <span id="debugCategoryId">-</span></div>
        <div>Current Word Index: <span id="debugIndex">0</span></div>
        <div>Total Words: <span id="debugTotal">0</span></div>
        <div>Card Flipped: <span id="debugFlipped">false</span></div>
        <div>API Status: <span id="debugAPI">Waiting...</span></div>
        <div>Data Source: <span id="debugDataSource">Unknown</span></div>
        <button onclick="toggleDebug()" class="btn btn-sm btn-outline-light mt-2">Hide Debug</button>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h4>Äang táº£i tá»« vá»±ng...</h4>
            <p>Vui lÃ²ng chá» trong giÃ¢y lÃ¡t</p>
            <div class="mt-3">
                <small class="text-muted">Äang káº¿t ná»‘i Ä‘áº¿n database...</small>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">âŒ CÃ³ lá»—i xáº£y ra</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="errorMessage">KhÃ´ng thá»ƒ táº£i dá»¯ liá»‡u tá»« vá»±ng.</p>
                    <div class="mt-3">
                        <strong>CÃ¡c bÆ°á»›c kháº¯c phá»¥c:</strong>
                        <ol class="mt-2">
                            <li>Kiá»ƒm tra káº¿t ná»‘i internet</li>
                            <li>Äáº£m báº£o Ä‘Ã£ Ä‘Äƒng nháº­p</li>
                            <li>Thá»­ lÃ m má»›i trang</li>
                        </ol>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÄÃ³ng</button>
                    <button type="button" class="btn btn-primary" onclick="window.location.reload()">LÃ m má»›i
                        trang</button>
                    <button type="button" class="btn btn-warning" onclick="useSampleData()">DÃ¹ng dá»¯ liá»‡u máº«u</button>
                </div>
            </div>
        </div>
    </div>

    <div class="study-container">
        <!-- Back Button & Controls -->
        <div class="top-controls">
            <a href="vocabulary-categories.html" class="back-button">â† Vá» danh sÃ¡ch chá»§ Ä‘á»</a>
            <div class="top-actions">
                <button onclick="toggleDebug()" class="control-btn secondary btn-sm">ğŸ› Debug</button>
                <button onclick="window.location.reload()" class="control-btn secondary btn-sm">ğŸ”„ Reload</button>
            </div>
        </div>

        <!-- Study Header -->
        <div class="study-header">
            <div class="session-info">
                <div class="category-badge" id="categoryName">
                    <span class="category-icon" id="categoryIcon">ğŸ“š</span>
                    <span id="categoryText">Äang táº£i...</span>
                </div>
                <div class="session-type-info">
                    PhiÃªn há»c: <span id="sessionType">Tá»« má»›i</span> |
                    <span id="dataSource">Äang xÃ¡c Ä‘á»‹nh nguá»“n dá»¯ liá»‡u...</span>
                </div>
            </div>

            <div class="progress-info">
                <div class="study-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="currentCard">0</div>
                        <div class="stat-label">Tháº» hiá»‡n táº¡i</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalCards">0</div>
                        <div class="stat-label">Tá»•ng tháº»</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="studiedToday">0</div>
                        <div class="stat-label">ÄÃ£ há»c hÃ´m nay</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reviewsDue">0</div>
                        <div class="stat-label">Cáº§n Ã´n táº­p</div>
                    </div>
                </div>

                <div class="study-progress">
                    <div class="progress">
                        <div class="progress-bar" id="studyProgress" style="width: 0%"></div>
                    </div>
                    <small class="text-muted mt-1 d-block">
                        Tiáº¿n Ä‘á»™ phiÃªn há»c: <span id="progressText">0/0</span>
                    </small>
                </div>
            </div>
        </div>

        <!-- Flashcard Container -->
        <div class="flashcard-container">
            <div id="flashcard" class="flashcard" tabindex="0">
                <div class="flashcard-inner">
                    <!-- Front Side (Japanese) -->
                    <div class="flashcard-face flashcard-front">
                        <div class="word-japanese" id="wordJapanese">Äang táº£i...</div>
                        <div class="word-reading" id="wordReading">Äang táº£i...</div>
                        <div class="word-info">
                            <div class="frequency-rank" id="frequencyRank"></div>
                        </div>
                        <div class="flip-hint">
                            ğŸ‘† Nháº¥n Ä‘á»ƒ xem nghÄ©a<br>
                            <small>Hoáº·c nháº¥n Space/Enter</small>
                        </div>
                    </div>

                    <!-- Back Side (Vietnamese) -->
                    <div class="flashcard-face flashcard-back">
                        <div class="word-meaning" id="wordMeaning">Äang táº£i...</div>
                        <div class="word-details">
                            <div class="word-type" id="wordType">noun</div>
                            <div class="word-example">
                                <div class="word-example-jp" id="wordExampleJp">ä¾‹æ–‡ãŒèª­ã¿è¾¼ã¿ä¸­...</div>
                                <div class="word-example-vn" id="wordExampleVn">VÃ­ dá»¥ Ä‘ang táº£i...</div>
                            </div>
                            <div class="usage-note" id="usageNote">Ghi chÃº Ä‘ang táº£i...</div>
                        </div>
                        <div class="knowledge-level-display">
                            <small>Má»©c Ä‘á»™ hiá»ƒu biáº¿t hiá»‡n táº¡i: <span id="currentKnowledgeLevel">ChÆ°a há»c</span></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Study Controls -->
        <div id="studyControls" class="study-controls">
            <div class="knowledge-explanation">
                <strong>ÄÃ¡nh giÃ¡ Ä‘á»™ khÃ³ cá»§a tá»« nÃ y:</strong>
                <small class="d-block text-muted">ÄÃ¡nh giÃ¡ nÃ y sáº½ áº£nh hÆ°á»Ÿng Ä‘áº¿n thá»i gian Ã´n táº­p</small>
            </div>

            <div class="knowledge-buttons">
                <button class="knowledge-btn btn-again" onclick="rateWord(1)" title="Tá»« nÃ y ráº¥t khÃ³, cáº§n há»c láº¡i ngay">
                    <span style="position: relative; z-index: 2;">
                        ğŸ˜° Láº¡i<br>
                        <small>&lt;1 phÃºt</small>
                    </span>
                </button>
                <button class="knowledge-btn btn-hard" onclick="rateWord(2)" title="Tá»« nÃ y khÃ³, cáº§n Ã´n táº­p sá»›m">
                    <span style="position: relative; z-index: 2;">
                        ğŸ¤” KhÃ³<br>
                        <small>&lt;6 phÃºt</small>
                    </span>
                </button>
                <button class="knowledge-btn btn-good" onclick="rateWord(3)" title="Tá»« nÃ y á»•n, Ã´n táº­p bÃ¬nh thÆ°á»ng">
                    <span style="position: relative; z-index: 2;">
                        ğŸ˜Š Tá»‘t<br>
                        <small>&lt;10 phÃºt</small>
                    </span>
                </button>
                <button class="knowledge-btn btn-easy" onclick="rateWord(4)" title="Tá»« nÃ y dá»…, cÃ³ thá»ƒ Ã´n táº­p muá»™n hÆ¡n">
                    <span style="position: relative; z-index: 2;">
                        ğŸ˜„ Dá»…<br>
                        <small>4 ngÃ y</small>
                    </span>
                </button>
            </div>

            <div class="control-row">
                <button class="control-btn secondary" onclick="skipWord()" title="Bá» qua tá»« nÃ y (S)">
                    â­ï¸ Bá» qua
                </button>
                <button class="control-btn" onclick="flipCard()" title="Láº­t tháº» (Space/F)">
                    ğŸ”„ Láº­t tháº»
                </button>
                <button class="control-btn secondary" onclick="playAudio()" title="PhÃ¡t Ã¢m (P)">
                    ğŸ”Š PhÃ¡t Ã¢m
                </button>
                <button class="control-btn secondary" onclick="showHint()" title="Gá»£i Ã½ (H)">
                    ğŸ’¡ Gá»£i Ã½
                </button>
                <button class="control-btn secondary" onclick="endSession()" title="Káº¿t thÃºc phiÃªn há»c (Esc)">
                    â¹ï¸ Káº¿t thÃºc
                </button>
            </div>

            <!-- Keyboard Shortcuts Help -->
            <div class="keyboard-shortcuts mt-3">
                <small class="text-muted">
                    <strong>PhÃ­m táº¯t:</strong>
                    Space/Enter: Láº­t tháº» | 1-4: ÄÃ¡nh giÃ¡ | S: Bá» qua | P: PhÃ¡t Ã¢m | H: Gá»£i Ã½ | Esc: Káº¿t thÃºc
                </small>
            </div>
        </div>

        <!-- Session Complete -->
        <div id="sessionComplete" class="session-complete" style="display: none;">
            <div class="complete-icon">ğŸ‰</div>
            <h3>HoÃ n thÃ nh phiÃªn há»c!</h3>
            <p>ChÃºc má»«ng báº¡n Ä‘Ã£ hoÃ n thÃ nh phiÃªn há»c tá»« vá»±ng hÃ´m nay.</p>

            <div class="complete-stats">
                <div class="complete-stat">
                    <div class="complete-stat-value" id="completedWords">0</div>
                    <div>Tá»« Ä‘Ã£ há»c</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-stat-value" id="sessionAccuracy">0%</div>
                    <div>Äá»™ chÃ­nh xÃ¡c</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-stat-value" id="sessionTime">0:00</div>
                    <div>Thá»i gian</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-stat-value" id="experienceGained">+0</div>
                    <div>Kinh nghiá»‡m</div>
                </div>
            </div>



            <div class="session-summary">
                <h5>ğŸ“Š TÃ³m táº¯t phiÃªn há»c</h5>
                <div id="ratingSummary" class="rating-summary"></div>
            </div>

            <div class="complete-actions">
                <button class="control-btn" onclick="startNewSession()">
                    ğŸ“š Há»c tiáº¿p
                </button>
                <button class="control-btn secondary" onclick="goToQuiz()">
                    âœï¸ LÃ m quiz
                </button>
                <button class="control-btn secondary" onclick="goToStats()">
                    ğŸ“Š Xem thá»‘ng kÃª
                </button>
                <a href="vocabulary-categories.html" class="control-btn secondary">
                    ğŸ“‹ Vá» danh sÃ¡ch chá»§ Ä‘á»
                </a>
                <a href="index.html" class="control-btn secondary">
                    ğŸ  Vá» trang chá»§
                </a>
            </div>
        </div>
        <!-- ThÃªm sau div sessionComplete -->
        <div id="noNewWords" class="session-complete" style="display: none;">
            <div class="complete-icon">ğŸ“</div>
            <h3>ÄÃ£ há»c háº¿t tá»« má»›i!</h3>
            <p>Báº¡n Ä‘Ã£ há»c háº¿t táº¥t cáº£ tá»« vá»±ng trong chá»§ Ä‘á» nÃ y. HÃ£y Ã´n táº­p hoáº·c thá»­ thÃ¡ch báº£n thÃ¢n!</p>

            <div class="complete-actions">
                <button class="control-btn" onclick="reviewMode()">
                    ğŸ”„ Ã”n táº­p táº¥t cáº£ tá»«
                </button>
                <button class="control-btn secondary" onclick="resetProgress()">
                    âš¡ Reset tiáº¿n Ä‘á»™ há»c
                </button>
                <button class="control-btn secondary" onclick="goToQuiz()">
                    âœï¸ LÃ m quiz
                </button>
                <a href="vocabulary-categories.html" class="control-btn secondary">
                    ğŸ“‹ Chá»n chá»§ Ä‘á» khÃ¡c
                </a>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/vocabulary-study.js"></script>
</body>

</html>
