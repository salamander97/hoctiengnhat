<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ Há»c tiáº¿ng Nháº­t cÃ¹ng Sakura ğŸŒ¸</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/home.css">
</head>
<body>
    <!-- Header vá»›i hiá»‡u á»©ng hoa anh Ä‘Ã o -->
    <div class="hero-section">
        <div class="sakura-container">
            <div class="sakura"></div>
            <div class="sakura"></div>
            <div class="sakura"></div>
            <div class="sakura"></div>
            <div class="sakura"></div>
        </div>
        
        <div class="container text-center">
            <div class="hero-content">
                <h1 class="hero-title">ğŸŒ¸ å­¦ç¿’ã®åº­ ğŸŒ¸</h1>
                <h2 class="hero-subtitle">VÆ°á»n há»c tiáº¿ng Nháº­t</h2>
                <p class="hero-description">CÃ¹ng nhau khÃ¡m phÃ¡ tháº¿ giá»›i Hiragana, Katakana vÃ  con sá»‘ má»™t cÃ¡ch vui váº»!</p>
                
                <!-- User info or login prompt -->
                <div id="userInfo" class="user-section">
                    <div id="welcomeUser" class="welcome-message d-none">
                        <h4>ã“ã‚“ã«ã¡ã¯ã€<span id="username"></span>ã•ã‚“ï¼</h4>
                        <p>HÃ´m nay chÃºng ta há»c gÃ¬ nhá»‰? ğŸ“š</p>
                    </div>
                    <div id="loginPrompt" class="login-prompt">
                        <p>Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ báº¯t Ä‘áº§u hÃ nh trÃ¬nh há»c táº­p! âœ¨</p>
                        <button class="btn btn-login" onclick="showLogin()">ğŸ”‘ ÄÄƒng nháº­p</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Menu -->
    <div class="container my-5">
        <div class="row" id="menuItems">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card" data-page="hiragana-rules">
                    <div class="menu-icon">ğŸŒ¸</div>
                    <h3>Quy táº¯c Hiragana</h3>
                    <p>Há»c cÃ¡ch ghÃ©p Ã¢m Yoon má»™t cÃ¡ch dá»… hiá»ƒu</p>
                    <div class="menu-arrow">â†’</div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card" data-page="hiragana-test">
                    <div class="menu-icon">âœï¸</div>
                    <h3>Kiá»ƒm tra Hiragana</h3>
                    <p>Thá»­ thÃ¡ch kiáº¿n thá»©c Hiragana cá»§a báº¡n</p>
                    <div class="progress-badge">
                        <span id="hiragana-progress">0%</span>
                    </div>
                    <div class="menu-arrow">â†’</div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card" data-page="katakana-test">
                    <div class="menu-icon">ğŸŒ</div>
                    <h3>Kiá»ƒm tra Katakana</h3>
                    <p>Thá»­ sá»©c vá»›i báº£ng chá»¯ cÃ¡i Katakana</p>
                    <div class="progress-badge">
                        <span id="katakana-progress">0%</span>
                    </div>
                    <div class="menu-arrow">â†’</div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card" data-page="number-test">
                    <div class="menu-icon">ğŸ”¢</div>
                    <h3>Kiá»ƒm tra Sá»‘ Ä‘áº¿m</h3>
                    <p>Há»c cÃ¡ch Ä‘áº¿m sá»‘ trong tiáº¿ng Nháº­t</p>
                    <div class="progress-badge">
                        <span id="number-progress">0%</span>
                    </div>
                    <div class="menu-arrow">â†’</div>
                </div>
            </div>

            <!-- CÃ¡c má»¥c sáº½ má»Ÿ trong tÆ°Æ¡ng lai -->
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card coming-soon">
                    <div class="menu-icon">ğŸ“š</div>
                    <h3>Tá»« vá»±ng N5</h3>
                    <p>Há»c tá»« vá»±ng cÆ¡ báº£n JLPT N5</p>
                    <div class="coming-soon-badge">Sáº¯p ra máº¯t</div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card coming-soon">
                    <div class="menu-icon">ğŸ“–</div>
                    <h3>Tá»« vá»±ng N4</h3>
                    <p>NÃ¢ng cao vá»›i tá»« vá»±ng JLPT N4</p>
                    <div class="coming-soon-badge">Sáº¯p ra máº¯t</div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card coming-soon">
                    <div class="menu-icon">ğŸ“•</div>
                    <h3>Tá»« vá»±ng N3</h3>
                    <p>Thá»­ thÃ¡ch vá»›i tá»« vá»±ng JLPT N3</p>
                    <div class="coming-soon-badge">Sáº¯p ra máº¯t</div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="menu-card coming-soon">
                    <div class="menu-icon">ğŸ“ˆ</div>
                    <h3>Thá»‘ng kÃª há»c táº­p</h3>
                    <p>Xem tiáº¿n Ä‘á»™ vÃ  thÃ nh tÃ­ch cá»§a báº¡n</p>
                    <div class="coming-soon-badge">Sáº¯p ra máº¯t</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content login-modal">
                <div class="modal-header">
                    <h5 class="modal-title">ğŸ”‘ ÄÄƒng nháº­p</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="username" class="form-label">TÃªn Ä‘Äƒng nháº­p</label>
                            <input type="text" class="form-control" id="loginUsername" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Máº­t kháº©u</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn btn-login w-100">ÄÄƒng nháº­p</button>
                        </div>
                        <div id="loginError" class="alert alert-danger mt-3 d-none"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4">
        <div class="container">
            <p class="mb-0">ğŸŒ¸ ChÃºc báº¡n há»c tiáº¿ng Nháº­t vui váº»! ãŒã‚“ã°ã£ã¦ï¼ğŸŒ¸</p>
            <p class="small text-muted">Made with â¤ï¸ for Japanese learners</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Initialize homepage
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            initializeMenuCards();
            createSakuraAnimation();
        });

        function initializeMenuCards() {
            const menuCards = document.querySelectorAll('.menu-card:not(.coming-soon)');
            
            menuCards.forEach(card => {
                card.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    if (isLoggedIn()) {
                        navigateToPage(page);
                    } else {
                        showLogin();
                    }
                });

                // Hover effects
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });

                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
        }

        function navigateToPage(page) {
            // Add loading animation
            document.body.style.opacity = '0.7';
            
            setTimeout(() => {
                window.location.href = page + '.html';
            }, 300);
        }

        function createSakuraAnimation() {
            const sakuras = document.querySelectorAll('.sakura');
            sakuras.forEach((sakura, index) => {
                sakura.style.animationDelay = `${index * 2}s`;
                sakura.style.left = `${Math.random() * 100}%`;
            });
        }

        function showLogin() {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        }

        // Load user progress
        function loadUserProgress() {
            if (isLoggedIn()) {
                // Call PHP API to get user progress
                fetch('php/user-progress.php?action=get')
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            updateProgressBadges(data.progress);
                        }
                    })
                    .catch(error => console.error('Error loading progress:', error));
            }
        }

        function updateProgressBadges(progress) {
            document.getElementById('hiragana-progress').textContent = progress.hiragana + '%';
            document.getElementById('katakana-progress').textContent = progress.katakana + '%';
            document.getElementById('number-progress').textContent = progress.numbers + '%';
        }
    </script>
</body>
</html>
